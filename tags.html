<DOCTYPE html>
<html>
  <head>
    <title>Graph based tag cloud</title>
    <meta name="robots" content="index, follow" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="libs/bootstrap-3.2.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="libs/bootstrap-3.2.0/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="libs/bootstrap-tagsinput-0.4.2/bootstrap-tagsinput.css">
    <link rel="stylesheet" href="css/tags.css">
		<script src="libs/jquery-2.1.1/jquery.min.js"></script>
    <script src="libs/bootstrap-3.2.0/js/bootstrap.min.js"></script>
    <script src="libs/bootstrap-tagsinput-0.4.2/bootstrap-tagsinput.js"></script>
    <script src="libs/typeahead-0.10.5/typeahead.bundle.js"></script>
    <script>
			function configureTags( id, fileKey, labels, limit ) {
				var tags = new Bloodhound({
				  datumTokenizer: Bloodhound.tokenizers.obj.whitespace('name'),
				  queryTokenizer: Bloodhound.tokenizers.whitespace,
				  prefetch: {
						url: 'tags.php?id='+fileKey,
						filter: function(list) {
						  return $.map(list, function(tag) {
							return { name: tag }; });
						}
				  },
					remote: {
						url: 'api/tag/s/?q=%QUERY&id='+labels+'&l='+limit,
						filter: function(list) {
						  return $.map(list, function(tag) {
							return { name: tag }; });
						}
					}
				});
				tags.clearPrefetchCache();
				tags.initialize();

				var elt = $( id );
				elt.tagsinput({
				  typeaheadjs: {
					name: 'tags',
					displayKey: 'name',
					valueKey: 'name',
					source: tags.ttAdapter()
				  }
				});
			}

			$(document).ready(function() {
				configureTags( ".skills-hard", "skills-hard", "tag;skill;hard", 10 );
				configureTags( ".skills-soft", "skills-soft", "tag;skill;soft", 10 );
				configureTags( ".interests", "interests", "tag;interest", 10 );
				configureTags( ".search", "skills-hard;soft-skills;interests", "tag", 10 );
				//---------------------------------------------------------------------
				//contact id
				//---------------------------------------------------------------------
				// TO move to the configureTags function
				var contacts = new Bloodhound({
					datumTokenizer: Bloodhound.tokenizers.obj.whitespace('name'),
  				queryTokenizer: Bloodhound.tokenizers.whitespace,
					prefetch: {
						url: 'data/out/contact.json',
						filter: function(list) {
						  return $.map(list, function(tag) {
							return { name: tag }; });
						}
					}
				});
				contacts.clearPrefetchCache();
				contacts.initialize();
				$('#contactName').typeahead(null, {
			  	name: 'contact',
			  	displayKey: 'name',
					valueKey: 'name',
  				source: contacts.ttAdapter()
				});


				// HACK: overrule hardcoded display inline-block of typeahead.js
				$(".twitter-typeahead").css('display', 'inline');
				//
				//
				var checIdTimer;
				$("#contactName").keypress(function( e ) {
					/*if ( e.which !== 0 )*/ {
					  clearTimeout( checIdTimer );
  					checIdTimer = setTimeout( function(){
							/*alert( $("#contactName").val() );*/
						}, 500 );
					}
				});

/*
				$("#formAddContact").submit(function(e){
					$.ajax({
						url: "addContact.php",
            type: "POST",
                    data: $(this).serialize(),
                    success: function(data){
                    	alert(data);
                    }
          });
        });
*/
			});
		</script>
  </head>
  <body>
		<div class="container">
			<div class="page-header">
			  <h1>Graph based tag cloud <small>demo</small></h1>
			</div>
			<!-- -->
      <div class="panel panel-default template">
				<div class="panel-heading">
        	<div class="panel-title">
          	<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapseContact" title="collapse/expand">
            	<span class="glyphicon glyphicon-collapse-down action"></span>
            </a>
						Contact
          </div>
        </div>
        <div id="collapseContact" class="panel-collapse collapse in">
        	<div class="panel-body">
						<form id="formAddContact" class="form-horizontal" role="form">
						  <div class="form-group"><!--  has-error has-feedback -->
						    <label for="contactName" class="col-sm-2 control-label">Name</label>
						    <div class="col-sm-4">
						      <input type="text" class="form-control" name="contactName" id="contactName" placeholder="" autofocus>
									<!-- span class="glyphicon glyphicon-remove form-control-feedback"></span-->
						    </div>
						  </div>
						  <div class="form-group"><!--  has-success has-feedback -->
						    <label for="contactSkillsHard" class="col-sm-2 control-label">Hard skills</label>
						    <div class="col-sm-10">
							 	 	<input class="skills-hard" type="text" name="contactSkillsHard" id="contactSkillsHard" placeholder="" value="">
									<!-- span class="glyphicon glyphicon-ok form-control-feedback"></span-->
						    </div>
						  </div>
						  <div class="form-group"><!--  has-success has-feedback -->
						    <label for="contactSkillsSoft" class="col-sm-2 control-label">Soft skills</label>
						    <div class="col-sm-10">
							 	 	<input class="skills-soft" type="text" name="contactSkillsSoft" id="contactSkillsSoft" placeholder="" value="">
									<!-- span class="glyphicon glyphicon-ok form-control-feedback"></span-->
						    </div>
						  </div>
						  <div class="form-group">
						    <label for="contactInterests" class="col-sm-2 control-label">Interests</label>
						    <div class="col-sm-10">
							 	 	<input class="interests" type="text" name="contactInterests" id="contactInterests" placeholder="" value="">
						    </div>
						  </div>
						  <div class="form-group">
						    <div class="col-sm-offset-2 col-sm-10">
						      <button type="submit" class="btn btn-default">Submit</button>
						    </div>
						  </div>
						</form>
          </div>
        </div>
      </div>
			<!-- -->
      <div class="panel panel-default template">
				<div class="panel-heading">
        	<div class="panel-title">
          	<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapseSearch" title="collapse/expand">
            	<span class="glyphicon glyphicon-collapse-down action"></span>
            </a>
						Search
          </div>
        </div>
        <div id="collapseSearch" class="panel-collapse collapse in">
        	<div class="panel-body">
						<div class="row">
					    <div class="col-sm-12">
								<input class="search" type="text" id="searchSkills" placeholder="Skills" value="">
							</div>
						</div>
          </div>
        </div>
      </div>
		</div>
  </body>
</html>

